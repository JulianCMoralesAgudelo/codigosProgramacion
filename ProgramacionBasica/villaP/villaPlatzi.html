<head>
<script>
var encrypted_channel_id='vo9yR8SboIvjtooW_J_LF7OErDUJOFgiaCUbKAf-9OA';
</script>
<script async src='/scripts/hosted.js'></script>
<link rel='stylesheet' href='/style.css'></head>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Villa Platzi</title>
  </head>
  <body>
    <canvas id="villaplatzi" width="500" height="500"></canvas>
    <script>
      document.addEventListener("keydown", moverChancho);
      var vp = document.getElementById("villaplatzi");
      var papel = vp.getContext("2d");
      var teclas = {
        UP: 38,
        DOWN: 40,
        RIGHT: 39,
        LEFT: 37,
      };
      console.log (teclas);
      //Lugar de X y Y del marranito.
      var x = 180;
      var y = 180;
      var fondo = {
        url: "https://i.imgur.com/JFI9rSW.png",
        cargaOk: false
      }
      var vaca = {
        url: "https://i.imgur.com/Wtfshlf.png",
        cargaOk: false
      }
      var pollo = {
        url: "https://i.imgur.com/rgeib7y.png",
        cargaOk: false
      }
      var cerdo = {
        url: "https://i.imgur.com/Y0Ge1fh.png",
        cargaOk: false
      };

      var vacas = aleatorio(8,40);
      var pollos = aleatorio(7,35);
      var cerdos = 1;
      console.log("vaca: ", vacas, "Pollo: ", pollos, "Cerdo: ", cerdos);


      fondo.imagen = new Image();
      fondo.imagen.src = fondo.url;
      fondo.imagen.addEventListener("load", cargarFondo);

      vaca.imagen = new Image();
      vaca.imagen.src = vaca.url;
      vaca.imagen.addEventListener("load",cargarVacas);

      vaca.imagen = new Image();
      vaca.imagen.src = vaca.url;
      vaca.imagen.addEventListener("load",cargarVacas);

      pollo.imagen = new Image();
      pollo.imagen.src = pollo.url;
      pollo.imagen.addEventListener("load",cargarPollos);

      cerdo.imagen = new Image();
      cerdo.imagen.src = cerdo.url;
      cerdo.imagen.addEventListener("load",cargarCerdos);


      function cargarFondo()
      {
        fondo.cargaOk = true;
        dibujar();

      }
      function cargarVacas()
      {
        vaca.cargaOk = true;
        dibujar();
      }
      function cargarPollos()
      {
        pollo.cargaOk = true;
        dibujar();
      }
      function cargarCerdos()
      {
        cerdo.cargaOk = true;
        dibujar();
      }

      function dibujar()
      {
        if (fondo.cargaOk)
        {
          papel.drawImage(fondo.imagen, 0, 0);
        }
        if (vaca.cargaOk)
        {
          for(var v=0; v < vacas; v++)
          {
            var x = aleatorio(0, 7);
            var y = aleatorio(0, 15);
            var x = x * 60;
            var y = y * 40;
            papel.drawImage(vaca.imagen, x, y);
          }
        }
        if (cerdo.cargaOk)
        {}
        if (pollo.cargaOk)
        {
          for (var c=0; c < pollos; c++)
          {
            var x = aleatorio(0,5);
            var y = aleatorio(0,20)
            var x = x * 70;
            var y = y * 20;
            papel.drawImage(pollo.imagen, x, y);
          }
        }
      }

      function moverChancho(evento)
      {
        var mov = 10;
        papel.drawImage(cerdo.imagen, 240, 240);
        switch (evento.keyCode)
        {
          case teclas.UP:
            dibujar ();
            papel.drawImage(cerdo.imagen, x, y - mov);
            y = y - mov;
            break;
          case teclas.DOWN:
            dibujar ();
            papel.drawImage(cerdo.imagen, x, y + mov);
            y = y + mov;
            break;
          case teclas.LEFT:
            dibujar ();
            papel.drawImage(cerdo.imagen, x - mov, y);
            x = x - mov;
            break;
          case teclas.RIGHT:
            dibujar ();
            papel.drawImage(cerdo.imagen, x + mov, y);
            x = x + mov;
            break;
          default:
            break;
        }
      }

      function aleatorio (min, maxi)
      {
        var resultado;
        resultado = Math.floor(Math.random() * (maxi - min + 1)) + min;
        return resultado;
      }
      document.write("<br> Mueve al marranito con las flechas del teclado." );
    </script>
  </body>
</html>
